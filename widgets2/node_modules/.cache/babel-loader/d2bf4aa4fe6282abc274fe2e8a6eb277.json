{"ast":null,"code":"var _jsxFileName = \"/home/haeuncreative/app_academy/hw_lectures/w11/w11d2/widgets2/src/components/Weather.js\";\nimport React from 'react';\nimport { toQueryString } from '../utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Weather extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.pollWeather = async location => {\n      let url = 'http://api.openweathermap.org/data/2.5/weather?';\n      /* Remember that it's unsafe to expose your API key. (Note that pushing\n      files that include your key to Github will expose your key!) In\n      production, you would definitely save your key in an environment variable,\n      so do that here. Since this project runs in your local environment\n      (localhost), save your key as an environment variable in a .env file in\n      the root directory of your app. You can then access the key here as\n      \"process.env.<variable_name>\". Make sure to .gitignore your .env file!\n      Also remember to restart your server (i.e., re-run \"npm start\") whenever\n      you change your .env file. */\n\n      const apiKey = process.env.REACT_APP_WEATHER_API;\n      const params = {\n        lat: location.coords.latitude,\n        lon: location.coords.longitude,\n        appid: apiKey\n      };\n      url += toQueryString(params);\n      const res = await fetch(url);\n\n      if (res.ok) {\n        const weather = await res.json();\n        this.setState({\n          weather\n        });\n      } else {\n        alert(\"Check Weather API key!\");\n      }\n    };\n\n    this.state = {\n      weather: null\n    };\n  }\n\n  componentDidMount() {\n    navigator.geolocation.getCurrentPosition(this.pollWeather, err => console.log(err), {\n      timeout: 10000\n    });\n  }\n\n  render() {\n    const weather = this.state.weather;\n\n    let content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"loading weather...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }, this);\n\n    if (weather) {\n      const temp = (weather.main.temp - 273.15) * 1.8 + 32;\n      content = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: weather.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [temp.toFixed(1), \" degrees\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"weather-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Weather\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weather\",\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Weather;","map":{"version":3,"sources":["/home/haeuncreative/app_academy/hw_lectures/w11/w11d2/widgets2/src/components/Weather.js"],"names":["React","toQueryString","Weather","Component","constructor","props","pollWeather","location","url","apiKey","process","env","REACT_APP_WEATHER_API","params","lat","coords","latitude","lon","longitude","appid","res","fetch","ok","weather","json","setState","alert","state","componentDidMount","navigator","geolocation","getCurrentPosition","err","console","log","timeout","render","content","temp","main","name","toFixed"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,UAA9B;;;AAEA,MAAMC,OAAN,SAAsBF,KAAK,CAACG,SAA5B,CAAsC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAenBC,WAfmB,GAeL,MAAOC,QAAP,IAAoB;AAChC,UAAIC,GAAG,GAAG,iDAAV;AAEA;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACM,YAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,qBAA3B;AAEA,YAAMC,MAAM,GAAG;AACbC,QAAAA,GAAG,EAAEP,QAAQ,CAACQ,MAAT,CAAgBC,QADR;AAEbC,QAAAA,GAAG,EAAEV,QAAQ,CAACQ,MAAT,CAAgBG,SAFR;AAGbC,QAAAA,KAAK,EAAEV;AAHM,OAAf;AAMAD,MAAAA,GAAG,IAAIP,aAAa,CAACY,MAAD,CAApB;AAEA,YAAMO,GAAG,GAAG,MAAMC,KAAK,CAACb,GAAD,CAAvB;;AACA,UAAIY,GAAG,CAACE,EAAR,EAAY;AACV,cAAMC,OAAO,GAAG,MAAMH,GAAG,CAACI,IAAJ,EAAtB;AACA,aAAKC,QAAL,CAAc;AAAEF,UAAAA;AAAF,SAAd;AACD,OAHD,MAIK;AACHG,QAAAA,KAAK,CAAE,wBAAF,CAAL;AACD;AACF,KA7CkB;;AAEjB,SAAKC,KAAL,GAAa;AACXJ,MAAAA,OAAO,EAAE;AADE,KAAb;AAGD;;AAEDK,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CACE,KAAKzB,WADP,EAEG0B,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFX,EAGE;AAAEG,MAAAA,OAAO,EAAE;AAAX,KAHF;AAKD;;AAkCHC,EAAAA,MAAM,GAAG;AACP,UAAMb,OAAO,GAAG,KAAKI,KAAL,CAAWJ,OAA3B;;AACA,QAAIc,OAAO,gBAAG;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAd;;AAEA,QAAId,OAAJ,EAAa;AACX,YAAMe,IAAI,GAAG,CAACf,OAAO,CAACgB,IAAR,CAAaD,IAAb,GAAoB,MAArB,IAA+B,GAA/B,GAAqC,EAAlD;AACAD,MAAAA,OAAO,gBACL;AAAA,gCACE;AAAA,oBAAId,OAAO,CAACiB;AAAZ;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA,qBAAIF,IAAI,CAACG,OAAL,CAAa,CAAb,CAAJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAMD;;AAED,wBACE;AAAS,MAAA,SAAS,EAAC,iBAAnB;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,kBACGJ;AADH;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAQD;;AAtEmC;;AAyEtC,eAAenC,OAAf","sourcesContent":["import React from 'react';\nimport { toQueryString } from '../utils';\n\nclass Weather extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        weather: null\n      };\n    }\n    \n    componentDidMount() {\n      navigator.geolocation.getCurrentPosition(\n        this.pollWeather,\n        (err) => console.log(err),\n        { timeout: 10000 }\n      );\n    }\n\n    pollWeather = async (location) => {\n      let url = 'http://api.openweathermap.org/data/2.5/weather?';\n\n      /* Remember that it's unsafe to expose your API key. (Note that pushing\n      files that include your key to Github will expose your key!) In\n      production, you would definitely save your key in an environment variable,\n      so do that here. Since this project runs in your local environment\n      (localhost), save your key as an environment variable in a .env file in\n      the root directory of your app. You can then access the key here as\n      \"process.env.<variable_name>\". Make sure to .gitignore your .env file!\n      Also remember to restart your server (i.e., re-run \"npm start\") whenever\n      you change your .env file. */\n      const apiKey = process.env.REACT_APP_WEATHER_API;\n\n      const params = {\n        lat: location.coords.latitude,\n        lon: location.coords.longitude,\n        appid: apiKey\n      };\n      \n      url += toQueryString(params);\n\n      const res = await fetch(url);\n      if (res.ok) {\n        const weather = await res.json();\n        this.setState({ weather });\n      }\n      else {\n        alert (\"Check Weather API key!\")\n      }\n    }\n\n  render() {\n    const weather = this.state.weather;\n    let content = <div className='loading'>loading weather...</div>;\n    \n    if (weather) {\n      const temp = (weather.main.temp - 273.15) * 1.8 + 32;\n      content = (\n        <div>\n          <p>{weather.name}</p>\n          <p>{temp.toFixed(1)} degrees</p>\n        </div>\n      );\n    }\n\n    return (\n      <section className=\"weather-section\">\n        <h1>Weather</h1>\n        <div className='weather'>\n          {content}\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Weather;"]},"metadata":{},"sourceType":"module"}